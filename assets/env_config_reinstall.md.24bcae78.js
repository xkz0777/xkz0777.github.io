import{_ as s,c as e,o,U as a}from"./chunks/framework.97e4ff17.js";const b=JSON.parse('{"title":"记一次重装系统","description":"","frontmatter":{},"headers":[],"relativePath":"env_config/reinstall.md","lastUpdated":1680787963000}'),n={name:"env_config/reinstall.md"},p=a(`<h1 id="记一次重装系统" tabindex="-1">记一次重装系统 <a class="header-anchor" href="#记一次重装系统" aria-label="Permalink to &quot;记一次重装系统&quot;">​</a></h1><p>因为考试周不想复习，试图将系统从 Ubuntu 20.04 更新到 Ubuntu 22.04，但是之前为了装 QQ 微信，看了奇怪的教程，把 Deepin 的软件源加到了电脑里，导致更新系统时系统里混进了 Deepin 的各种奇怪软件，成了 Deepin 和 Ubuntu 的融合体，经过各种尝试修复未果，只能重装。</p><p>原本的电脑装了 3 个系统，Win11，Ubuntu 20.04 和记不清版本的 Manjaro，现在准备直接全部抹掉，最后只装下 Ubuntu 22.04。</p><p>首先是备份。由于我 <code>/home</code> 是独立分区的，所以无需备份，将 <code>/usr</code>，<code>/opt</code> 备份后即可将除 <code>/home</code> 所在的分区全部格式化。</p><p>之后制作启动盘，并进行安装，安装时需要分区，这里我分出了 500MB 作 efi 分区，其余作 <code>/</code> 分区。</p><p>安装完成后需要把备份的目录替换回去，<code>/opt</code> 可以直接作替换，<code>/usr</code> 因为之前混入了一些 Deepin 的东西，直接替换后又把我搞死机了（于是又重装了一次），只能选择部分替换，这里比较重要的包括 <code>/usr/share</code>（里面的 <code>applications</code> 文件夹存有大量应用图标，不备份会导致 <code>/opt</code> 里很多应用在启动台里找不到图标），<code>/usr/bin</code> 等。</p><p>最后需要把 <code>/home</code> 挂载回去，首先重命名当前的 <code>/home</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#98C379;">sudo</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mv</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/home</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/home.old</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后创建一个新的 <code>/home</code>，并把新分区（记作 <code>/dev/sdb</code>）挂载过来：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#98C379;">sudo</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mkdir</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/home</span></span>
<span class="line"><span style="color:#ABB2BF;">$ </span><span style="color:#98C379;">sudo</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">mount</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/dev/sdb1</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">/home</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>之后编辑 <code>/etc/fstab</code>，把分区的 UUID 加进去即可。</p>`,11),c=[p];function l(t,r,d,i,u,B){return o(),e("div",null,c)}const _=s(n,[["render",l]]);export{b as __pageData,_ as default};
