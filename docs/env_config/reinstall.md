# 记一次重装系统

因为考试周不想复习，试图将系统从 Ubuntu 20.04 更新到 Ubuntu 22.04，但是之前为了装 QQ 微信，看了奇怪的教程，把 Deepin 的软件源加到了电脑里，导致更新系统时系统里混进了 Deepin 的各种奇怪软件，成了 Deepin 和 Ubuntu 的融合体，经过各种尝试修复未果，只能重装。

原本的电脑装了 3 个系统，Win11，Ubuntu 20.04 和记不清版本的 Manjaro，现在准备直接全部抹掉，最后只装下 Ubuntu 22.04。

首先是备份。由于我 `/home` 是独立分区的，所以无需备份，将 `/usr`，`/opt` 备份后即可将除 `/home` 所在的分区全部格式化。

之后制作启动盘，并进行安装，安装时需要分区，这里我分出了 500MB 作 efi 分区，其余作 `/` 分区。

安装完成后需要把备份的目录替换回去，`/opt` 可以直接作替换，`/usr` 因为之前混入了一些 Deepin 的东西，直接替换后又把我搞死机了（于是又重装了一次），只能选择部分替换，这里比较重要的包括 `/usr/share`（里面的 `applications` 文件夹存有大量应用图标，不备份会导致 `/opt` 里很多应用在启动台里找不到图标），`/usr/bin` 等。

最后需要把 `/home` 挂载回去，首先重命名当前的 `/home`:

```bash
$ sudo mv /home /home.old
```

然后创建一个新的 `/home`，并把新分区（记作 `/dev/sdb`）挂载过来：

```bash
$ sudo mkdir /home
$ sudo mount /dev/sdb1 /home
```

之后编辑 `/etc/fstab`，把分区的 UUID 加进去即可。
